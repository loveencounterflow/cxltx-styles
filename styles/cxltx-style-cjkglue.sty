

% ==========================================================================================================
% CJK INTER-CHARACTER GLUE AND WHITESPACE HANDLING
% ----------------------------------------------------------------------------------------------------------
\ProvidesPackage{cxltx-style-cjkglue}

% ----------------------------------------------------------------------------------------------------------
\newcommand{\cjkgGlue}{\hskip -0.4pt plus 3pt minus 1pt}%

% ----------------------------------------------------------------------------------------------------------
\chardef\CharNormal=0%
\chardef\CharCjk=1%
\chardef\CharCjkPunctA=2%
\chardef\CharCjkPunctB=3%
\chardef\CharBound=255%

% ----------------------------------------------------------------------------------------------------------
\newcommand{\cjkgUseCjkGlue}{%
  \obeyspaces\obeylines%
  \begingroup\lccode`\~=`\ \lowercase{\endgroup\let~}\cjkgGlue%
  \begingroup\lccode`\~=`\^^M\lowercase{\endgroup\let~}\cjkgGlue%
  % http://tex.stackexchange.com/a/10266/28067
  % ftp://ftp.mpi-sb.mpg.de/pub/tex/mirror/ftp.dante.de/pub/tex/info/xetexref/xetex-reference.pdf
  \XeTeXinterchartokenstate=1%
  % \XeTeXinterchartoks\CharNormal\CharNormal={\cjkgGlue}%
  % \XeTeXinterchartoks\CharNormal\CharCjk={\cjkgGlue}%
  % \XeTeXinterchartoks\CharCjk\CharNormal={\cjkgGlue}%
  % % \XeTeXinterchartoks\CharCjk\CharBound={---}%
  % % \XeTeXinterchartoks\CharBound\CharCjk={---}%
  % \XeTeXinterchartoks\CharCjkPunctA\CharCjk={\cjkgGlue}%
  % \XeTeXinterchartoks\CharCjkPunctB\CharCjk={\cjkgGlue}%
  % \XeTeXinterchartoks\CharCjk\CharCjkPunctA={\cjkgGlue}%
  % \XeTeXinterchartoks\CharCjk\CharCjkPunctB={\cjkgGlue}%
  % \XeTeXinterchartoks\CharCjk\CharCjk={\cjkgGlue}%
  }
