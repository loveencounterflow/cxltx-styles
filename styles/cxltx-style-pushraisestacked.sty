


% ==========================================================================================================
% PUSH & RAISE, STACKED
% ----------------------------------------------------------------------------------------------------------
\ProvidesPackage{cxltx-style-pushraisestacked}
\usepackage{fp}
\usepackage{fifo-stack}

% ----------------------------------------------------------------------------------------------------------
\makeatletter

% ----------------------------------------------------------------------------------------------------------
\FSCreate{prs@StackX}{0}%
\FSCreate{prs@StackY}{0}%
\FPmul\prsFactorX{1}{5}%
\FPmul\prsFactorY{1}{10}%
\FPmul\prs@X{0}{0}%
\FPmul\prs@Y{0}{0}%

% ----------------------------------------------------------------------------------------------------------
\newcommand{\prsPush}[1]{\prsPushRaise{#1}{0}}
\newcommand{\prsRaise}[1]{\prsPushRaise{0}{#1}}

% ----------------------------------------------------------------------------------------------------------
\newcommand{\prsPushRaise}[2]{%
  \FPmul\prs@X{#1}{\prsFactorX}%
  \FPmul\prs@Y{#2}{\prsFactorY}%
  \FSPush{prs@StackX}{\prs@X}%
  \FSPush{prs@StackY}{\prs@Y}%
  \prs@Transform{\prs@X}{\prs@Y}}

% ----------------------------------------------------------------------------------------------------------
\newcommand{\prsBack}{%
  \FPmul\prs@X{-1}{\FSTop{prs@StackX}}%
  \FPmul\prs@Y{-1}{\FSTop{prs@StackY}}%
  \FSPop{prs@StackX}%
  \FSPop{prs@StackY}%
  \prs@Transform{\prs@X}{\prs@Y}}%

% ----------------------------------------------------------------------------------------------------------
\newcommand{\prs@Transform}[2]{%
  \special{pdf:literal 1 0 0 1 #1 #2 cm}}

% ----------------------------------------------------------------------------------------------------------
\makeatother


